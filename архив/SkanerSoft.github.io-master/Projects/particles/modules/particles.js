PointJS.Module=function(b){var f=b.system.getContext(),g=b.math,c=[],e=function(a,b,c,e,f,d,h){d*=100;this.dx=g.random(-d,d,!0)/100;this.dy=g.random(-d,d,!0)/100;this.startX=this.x=b+g.random(-d,d)/100;this.startY=this.y=c+g.random(-d,d)/100;this.speed=d/100;this.color=e;this.radius=f;this.step=h;this.alpha=1;this.type={circle:0,gravity:1,fire:2}[a]};e.prototype.isExit=function(){return Math.sqrt(Math.pow(this.startX-this.x,2)+Math.pow(this.startY-this.y,2))>this.max};e.prototype.getDist=function(){return Math.sqrt(Math.pow(this.startX-
this.x,2)+Math.pow(this.startY-this.y,2))};e.prototype.draw=function(){1===this.type?this.dy+=this.speed/10:2===this.type&&(1<this.radius&&(this.radius-=this.speed/10),0<this.dy&&(this.dy=0),this.dy-=this.speed/10,0>=this.dx&&(this.dx+=this.speed/20),0<=this.dx&&(this.dx-=this.speed/20));this.x+=this.dx*b.game.getDT(10);this.y+=this.dy*b.game.getDT(10);this.alpha-=this.step;if(!(0>this.alpha)){var a=f.globalAlpha;f.globalAlpha=this.alpha;b.brush.drawCircle({x:this.x-this.radius,y:this.y-this.radius,
radius:this.radius,fillColor:this.color});f.globalAlpha=a}};b.particles={};b.particles.setLimit=function(a){};b.particles.add=function(a){if(a.density)for(var b=a.density;0<=b;b--)c.push(new e(a.type,a.position.x||0,a.position.y||0,a.fillColor,a.size,a.speed||10,a.step||.01));else c.push(new e(a.type,a.position.x||0,a.position.y||0,a.fillColor,a.size,a.speed||10,a.step||.01))};b.system.addEvent("postLoop","updateParticles",function(){for(var a=c.length-1;0<=a;a--)c[a].draw(),(0>=c[a].alpha||1>c[a].radius)&&
c.splice(a,1);b.brush.drawTextS({text:"Particles: "+c.length,size:30,color:"white"})})};
